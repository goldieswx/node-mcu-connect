/*
    node-mcu-connect . node.js UDP Interface for embedded devices.
    Copyright (C) 2013-4 David Jakubowski

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>. 
*/


After much tinkering, mush simplified & flexible & lower latency & more efficient protocol


M->N
Node Avail

32b [M]    MOSI  [PRE PRE CMD CMD] [DEST_CMD DEST | x             x]     [data 20b]  [ x  x     CHK CHK] 
32b [S-x]  MISO  0   0   0   0     0    0             0             0       0            0 CMDID   CHK CHK

Node Busy

32b [M]    MOSI  [PRE PRE CMD CMD] [DEST_CMD DEST | x             x]     [data 20b]  [ x  x     CHK CHK] 
32b [S-x]  MISO  0   0   0   0     0    0             0             0       0            0   0       0   0

N->M (old sncc mode style, slave cmd can be micmd or sncc)
32b [M]    MOSI  [PRE  PRE CMD CMD] [DEST_CMD DEST_SNCC | x             x]     [data 20b]  [ x  x     CHK CHK] 
32b [S-x]  MISO  [PRE* PRE* CMD CMD [node id  mask   node id in mask]     0             0   0       0   0




MASTER
{ unsigned word preamble,
  unsigned word cmd,
  unsigned word destinationCmd,
  unsigned word destinationSncc,
  unsigned char data[20],
  unsigned word reserved,
  unsigned word chkSum
}

SLAVE
{ 
  unsigned word preamble,
  unsigned word cmd,
  unsigned word signalMask2,
  unsigned word signalMask1,
  unsigned char data[20],
  unsigned word reserved,
  unsigned word chkSum
}


	   
